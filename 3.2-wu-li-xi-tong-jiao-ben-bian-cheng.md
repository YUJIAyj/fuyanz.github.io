# 😂 3.2物理系统脚本编程

## 3.2.1获取刚体组件

当一个物体挂载了刚体时，即可在脚本中获取该物体的刚体组件

```csharp
using UnityEngine;
public class Test:MonoBehaviour{
    Rigidbody rigid;
    void Start()
    {
        rigid=GetComponent<Rigidbody>();
        }
    }
```

一般将刚体变量命名为rigid并定义为一个字段，方便反复使用

## 3.2.2施加作用力

### AddForce（）

参数为Vector3类型，用一个向量表示力。

```csharp
private void Update(){
    if(Input.GetButtonDown("Jump")){
        rigid.AddForce(new Vector3(0,100,0));
        }
    }
```

持续时间是一个物理帧间隔 默认0.02秒

## 3.2.3修改速度

### 让物体匀速运动

每帧让物体的位置前进一段很短的距离

```csharp
//获取当前物体速度
Vector3 vel=rigid.velocity;
//将当前速度沿z轴增加到1m/s
rigid.velocity-=vel+new Vector3(0,0,1);
```

### 按空格键时跳跃，并在空中多次跳跃

```csharp
using UnityEngine;
public class SimpleJump:MonoBehaviour
{
    Rigidbody rigid;
    void Start(){
        rigid=GetComponent<Rigidbody>();
        }
    private void Update(){
        if(Input.GetButtonDown("Jump")){
            rigid.AddForce(new Vector3(0,100,0);
            }
        }
    }
```

#### 优化

```csharp
using UnityEngine;
public class SimpleJump:MonoBehaviour
{
    Rigidbody rigid;
    void Start(){
        rigid=GetComponent<Rigidbody>();
        }
    private void Update(){
        if(Input.GetButtonDown("Jump")){
            rigid.velocity=new Vector3(rigid.velocity.x,0,rigid.velocity.z);
            rigid.AddForce(new Vector3(0,100,0);
            }
        }
    }
```

## 3.2.4射线的使用方法

* 游戏中有单击地面的操作，因此要发射射线以确定是否点击中了可单击区域和单击位置的坐标。
* 在判定子弹或技能是否击中目标时，射线没有速度（瞬时发生），易于使用，综合效率高
* 3D或2D动作游戏中，判断玩家是否落地时，可以向角色脚下发射射线；判断玩家是否接近墙壁，可以
